/**
 * @license
 * (C) Copyright Contributors to the SearXNG project.
 * (C) Copyright Contributors to the searx project (2014 - 2021).
 * SPDX-License-Identifier: AGPL-3.0-or-later
 */window.searxng=((m,l)=>{m.Element&&(o=>{o.matches=o.matches||o.matchesSelector||o.webkitMatchesSelector||o.msMatchesSelector||function(a){const t=(this.parentNode||this.document).querySelectorAll(a);let s=-1;for(;t[++s]&&t[s]!==this;);return!!t[s]}})(Element.prototype);function i(o,a,t){try{o.call(a,t)}catch(s){console.log(s)}}const f=window.searxng||{};f.on=(o,a,t,s)=>{s=s||!1,typeof o!="string"?o.addEventListener(a,t,s):l.addEventListener(a,r=>{let n=r.target||r.srcElement,u=!1;for(;n!=null&&n.matches&&n!==l&&(u=n.matches(o),!u);)n=n.parentElement;u&&i(t,n,r)},s)},f.ready=o=>{document.readyState!=="loading"?o.call(m):m.addEventListener("DOMContentLoaded",o.bind(m))},f.http=(o,a,t=null)=>new Promise((s,r)=>{try{const n=new XMLHttpRequest;n.open(o,a,!0),n.timeout=2e4,n.onload=()=>{n.status===200?s(n.response,n.responseType):r(Error(n.statusText))},n.onerror=()=>{r(Error("Network Error"))},n.onabort=()=>{r(Error("Transaction is aborted"))},n.ontimeout=()=>{r(Error("Timeout"))},t?n.send(t):n.send()}catch(n){r(n)}}),f.loadStyle=o=>{const a=`${f.settings.theme_static_path}/${o}`,t=`style_${o.replace(".","_")}`;let s=l.getElementById(t);s===null&&(s=l.createElement("link"),s.setAttribute("id",t),s.setAttribute("rel","stylesheet"),s.setAttribute("type","text/css"),s.setAttribute("href",a),l.body.appendChild(s))},f.loadScript=(o,a)=>{const t=`${f.settings.theme_static_path}/${o}`,s=`script_${o.replace(".","_")}`;let r=l.getElementById(s);if(r===null)r=l.createElement("script"),r.setAttribute("id",s),r.setAttribute("src",t),r.onload=a,r.onerror=()=>{r.setAttribute("error","1")},l.body.appendChild(r);else if(r.hasAttribute("error"))console.log(`callback not executed : script '${t}' not loaded.`);else try{a.apply(r,[])}catch(n){console.log(n)}},f.insertBefore=(o,a)=>{a.parentNode.insertBefore(o,a)},f.insertAfter=(o,a)=>{a.parentNode.insertAfter(o,a.nextSibling)},f.on(".close","click",function(){this.parentNode.classList.add("invisible")});function p(){for(const o of l.getElementsByTagName("body")[0].classList.values())if(o.endsWith("_endpoint"))return o.split("_")[0];return""}return f.endpoint=p(),f})(window,document);searxng.ready(()=>{if(searxng.infinite_scroll_supported="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,searxng.endpoint!=="results")return;if(!searxng.infinite_scroll_supported){console.log("IntersectionObserver not supported");return}const m=document,l=m.getElementById("results").classList.contains("only_template_images");function i(){const o=m.createElement("div");return o.classList.add("loader"),o}function f(o,a){o.textContent="",a.forEach(t=>o.appendChild(t))}function p(o){const a=m.querySelector("#pagination form.next_page");if(!a)return;f(m.querySelector("#pagination"),[i()]);const t=new FormData(a);searxng.http("POST",m.querySelector("#search").getAttribute("action"),t).then(s=>{const r=new DOMParser().parseFromString(s,"text/html"),n=r.querySelectorAll("#urls article"),u=r.querySelector("#pagination");m.querySelector("#pagination").remove(),n.length>0&&!l&&m.querySelector("#urls").appendChild(m.createElement("hr")),n.forEach(b=>{m.querySelector("#urls").appendChild(b)}),u&&(m.querySelector("#results").appendChild(u),o())}).catch(s=>{console.log(s);const r=m.createElement("div");r.textContent=searxng.settings.translations.error_loading_next_page,r.classList.add("dialog-error"),r.setAttribute("role","alert"),f(m.querySelector("#pagination"),[r])})}if(searxng.settings.infinite_scroll&&searxng.infinite_scroll_supported){const o={rootMargin:"20rem"},a="article.result:last-child",t=new IntersectionObserver(s=>{const r=s[0];r.isIntersecting&&(t.unobserve(r.target),p(()=>t.observe(m.querySelector(a),o)))});t.observe(m.querySelector(a),o)}});searxng.ready(()=>{function m(e){for(;e!==void 0;){if(e.classList.contains("detail"))return!0;if(e.classList.contains("result"))return!1;e=e.parentNode}return!1}function l(e){for(;e!==void 0;){if(e.classList.contains("result"))return e;e=e.parentNode}}function i(e){return e==null?void 0:e.classList.contains("result-images")}searxng.on(".result","click",function(e){if(!m(e.target)){a(this)(!0,!0);const c=l(e.target);i(c)&&(e.preventDefault(),searxng.selectImage(c))}}),searxng.on(".result a","focus",e=>{if(!m(e.target)){const c=l(e.target);c&&c.getAttribute("data-vim-selected")===null&&a(c)(!0),i(c)&&searxng.selectImage(c)}},!0);const f={Escape:{key:"ESC",fun:s,des:"remove focus from the focused input",cat:"Control"},c:{key:"c",fun:S,des:"copy url of the selected result to the clipboard",cat:"Results"},h:{key:"h",fun:w,des:"toggle help window",cat:"Other"},i:{key:"i",fun:k,des:"focus on the search input",cat:"Control"},n:{key:"n",fun:n(),des:"go to next page",cat:"Results"},o:{key:"o",fun:g(!1),des:"open search result",cat:"Results"},p:{key:"p",fun:u(),des:"go to previous page",cat:"Results"},r:{key:"r",fun:t,des:"reload page from the server",cat:"Control"},t:{key:"t",fun:g(!0),des:"open the result in a new tab",cat:"Results"}},p={default:Object.assign({ArrowLeft:{key:"←",fun:a("up"),des:"select previous search result",cat:"Results"},ArrowRight:{key:"→",fun:a("down"),des:"select next search result",cat:"Results"}},f),vim:Object.assign({b:{key:"b",fun:d(-window.innerHeight),des:"scroll one page up",cat:"Navigation"},f:{key:"f",fun:d(window.innerHeight),des:"scroll one page down",cat:"Navigation"},u:{key:"u",fun:d(-window.innerHeight/2),des:"scroll half a page up",cat:"Navigation"},d:{key:"d",fun:d(window.innerHeight/2),des:"scroll half a page down",cat:"Navigation"},g:{key:"g",fun:h(-document.body.scrollHeight,"top"),des:"scroll to the top of the page",cat:"Navigation"},v:{key:"v",fun:h(document.body.scrollHeight,"bottom"),des:"scroll to the bottom of the page",cat:"Navigation"},k:{key:"k",fun:a("up"),des:"select previous search result",cat:"Results"},j:{key:"j",fun:a("down"),des:"select next search result",cat:"Results"},y:{key:"y",fun:S,des:"copy url of the selected result to the clipboard",cat:"Results"}},f)},o=p[searxng.settings.hotkeys]||p.default;searxng.on(document,"keydown",e=>{if(Object.prototype.hasOwnProperty.call(o,e.key)&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey){const c=e.target.tagName.toLowerCase();e.key==="Escape"?o[e.key].fun(e):(e.target===document.body||c==="a"||c==="button")&&(e.preventDefault(),o[e.key].fun())}});function a(e){return(c,q)=>{let v=document.querySelector(".result[data-vim-selected]"),_=e;if(v===null){if(v=document.querySelector(".result"),v===null)return;(e==="down"||e==="up")&&(_=v)}let y,T=document.querySelectorAll(".result");if(T=Array.from(T),typeof _!="string")y=_;else switch(_){case"visible":{const A=document.documentElement.scrollTop||document.body.scrollTop,x=A+document.documentElement.clientHeight;for(let I=0;I<T.length;I++){y=T[I];const B=y.offsetTop;if(B+y.clientHeight<=x&&B>A)break}break}case"down":y=T[T.indexOf(v)+1]||v;break;case"up":y=T[T.indexOf(v)-1]||v;break;case"bottom":y=T[T.length-1];break;case"top":default:y=T[0]}if(y){if(v.removeAttribute("data-vim-selected"),y.setAttribute("data-vim-selected","true"),!q){const A=y.querySelector("h3 a")||y.querySelector("a");A!==null&&A.focus()}c||b()}}}function t(){document.location.reload(!0)}function s(e){const c=e.target.tagName.toLowerCase();document.activeElement&&(c==="input"||c==="select"||c==="textarea")?document.activeElement.blur():searxng.closeDetail()}function r(e){return()=>{const c=document.querySelector(e);c&&c.click()}}function n(){return r('nav#pagination .next_page button[type="submit"]')}function u(){return r('nav#pagination .previous_page button[type="submit"]')}function b(){const e=document.querySelector(".result[data-vim-selected]");if(e===null)return;const c=document.documentElement.scrollTop||document.body.scrollTop,q=document.documentElement.clientHeight,v=e.offsetTop,_=v+e.clientHeight,y=120;if(e.previousElementSibling===null&&_<q){window.scroll(window.scrollX,0);return}c>v-y?window.scroll(window.scrollX,v-y):c+q<_+y&&window.scroll(window.scrollX,_-q+y)}function d(e){return()=>{window.scrollBy(0,e),a("visible")()}}function h(e,c){return()=>{window.scrollTo(0,e),a(c)()}}function k(){window.scrollTo(0,0);const e=document.querySelector("#q");if(e.focus(),e.setSelectionRange){const c=e.value.length;e.setSelectionRange(c,c)}}function g(e){return()=>{let c=document.querySelector(".result[data-vim-selected] h3 a");if(c===null&&(c=document.querySelector(".result[data-vim-selected] > a")),c!==null){const q=c.getAttribute("href");e?window.open(q):window.location.href=q}}}function E(e){const c={};for(const _ in o){const y=o[_];c[y.cat]=c[y.cat]||[],c[y.cat].push(y)}const q=Object.keys(c).sort((_,y)=>c[y].length-c[_].length);if(q.length===0)return;let v='<a href="#" class="close" aria-label="close" title="close">×</a>';v+="<h3>How to navigate SearXNG with hotkeys</h3>",v+="<table>";for(let _=0;_<q.length;_++){const y=c[q[_]],T=_===q.length-1,A=_%2===0;A&&(v+="<tr>"),v+="<td>",v+=`<h4>${y[0].cat}</h4>`,v+='<ul class="list-unstyled">';for(const x in y)v+=`<li><kbd>${y[x].key}</kbd> ${y[x].des}</li>`;v+="</ul>",v+="</td>",(!A||T)&&(v+="</tr>")}v+="</table>",e.innerHTML=v}function w(){let e=document.querySelector("#vim-hotkeys-help");e==null?(e=document.createElement("div"),e.id="vim-hotkeys-help",e.className="dialog-modal",E(e),document.getElementsByTagName("body")[0].appendChild(e)):e.classList.toggle("invisible")}function S(){const e=document.querySelector(".result[data-vim-selected] h3 a");if(e===null)return;const c=e.getAttribute("href");navigator.clipboard.writeText(c)}searxng.scrollPageToSelected=b,searxng.selectNext=a("down"),searxng.selectPrevious=a("up")});((m,l,i)=>{i.ready(()=>{i.on(".searxng_init_map","click",function(f){this.classList.remove("searxng_init_map");const p=this.dataset.leafletTarget,o=parseFloat(this.dataset.mapLon),a=parseFloat(this.dataset.mapLat),t=parseFloat(this.dataset.mapZoom),s=JSON.parse(this.dataset.mapBoundingbox),r=JSON.parse(this.dataset.mapGeojson);i.loadStyle("css/leaflet.css"),i.loadScript("js/leaflet.js",()=>{let n=null;if(s){const S=L.latLng(s[0],s[2]),e=L.latLng(s[1],s[3]);n=L.latLngBounds(S,e)}const u=L.map(p),b="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",d='Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',h=new L.TileLayer(b,{minZoom:1,maxZoom:19,attribution:d}),k="https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",g='Wikimedia maps | Maps data © <a href="https://openstreetmap.org">OpenStreetMap contributors</a>',E=new L.TileLayer(k,{minZoom:1,maxZoom:19,attribution:g});n?setTimeout(()=>{u.fitBounds(n,{maxZoom:17})},0):o&&a&&(t?u.setView(new L.LatLng(a,o),t):u.setView(new L.LatLng(a,o),8)),u.addLayer(h);const w={"OSM Mapnik":h,"OSM Wikimedia":E};L.control.layers(w).addTo(u),r&&L.geoJson(r).addTo(u)}),f.preventDefault()})})})(window,document,window.searxng);((m,l,i)=>{i.endpoint==="preferences"&&i.ready(()=>{let f=null;function p(){f==null&&i.http("GET","engine_descriptions.json").then(n=>{f=JSON.parse(n);for(const[u,b]of Object.entries(f)){const d=l.querySelectorAll(`[data-engine-name="${u}"] .engine-description`);for(const h of d){const k=` (<i>${i.settings.translations.Source}:&nbsp;${b[1]}</i>)`;h.innerHTML=b[0]+k}}})}for(const n of l.querySelectorAll("[data-engine-name]"))i.on(n,"mouseenter",p);const o=l.querySelectorAll(".enable-all-engines"),a=l.querySelectorAll(".disable-all-engines"),t=l.querySelectorAll("tbody input[type=checkbox][class~=checkbox-onoff]"),s=n=>{for(const u of t)u.offsetParent!==null&&(u.checked=!n)};for(const n of o)i.on(n,"click",()=>s(!0));for(const n of a)i.on(n,"click",()=>s(!1));const r=l.querySelector("#copy-hash");i.on(r,"click",n=>{n.preventDefault(),navigator.clipboard.writeText(r.dataset.hash),r.innerText=r.dataset.copiedText})})})(window,document,window.searxng);/*!
 * swiped-events.js - v@version@
 * Pure JavaScript swipe events
 * https://github.com/john-doherty/swiped-events
 * @inspiration https://stackoverflow.com/questions/16348031/disable-scrolling-when-touch-moving-certain-element
 * @author John Doherty <www.johndoherty.info>
 * @license MIT
 */(function(m,l){typeof m.CustomEvent!="function"&&(m.CustomEvent=function(d,h){h=h||{bubbles:!1,cancelable:!1,detail:void 0};var k=l.createEvent("CustomEvent");return k.initCustomEvent(d,h.bubbles,h.cancelable,h.detail),k},m.CustomEvent.prototype=m.Event.prototype),l.addEventListener("touchstart",n,!1),l.addEventListener("touchmove",u,!1),l.addEventListener("touchend",r,!1);var i=null,f=null,p=null,o=null,a=null,t=null,s=0;function r(d){if(t===d.target){var h=parseInt(b(t,"data-swipe-threshold","20"),10),k=b(t,"data-swipe-unit","px"),g=parseInt(b(t,"data-swipe-timeout","500"),10),E=Date.now()-a,w="",S=d.changedTouches||d.touches||[];if(k==="vh"&&(h=Math.round(h/100*l.documentElement.clientHeight)),k==="vw"&&(h=Math.round(h/100*l.documentElement.clientWidth)),Math.abs(p)>Math.abs(o)?Math.abs(p)>h&&E<g&&(p>0?w="swiped-left":w="swiped-right"):Math.abs(o)>h&&E<g&&(o>0?w="swiped-up":w="swiped-down"),w!==""){var e={dir:w.replace(/swiped-/,""),touchType:(S[0]||{}).touchType||"direct",fingers:s,xStart:parseInt(i,10),xEnd:parseInt((S[0]||{}).clientX||-1,10),yStart:parseInt(f,10),yEnd:parseInt((S[0]||{}).clientY||-1,10)};t.dispatchEvent(new CustomEvent("swiped",{bubbles:!0,cancelable:!0,detail:e})),t.dispatchEvent(new CustomEvent(w,{bubbles:!0,cancelable:!0,detail:e}))}i=null,f=null,a=null}}function n(d){d.target.getAttribute("data-swipe-ignore")!=="true"&&(t=d.target,a=Date.now(),i=d.touches[0].clientX,f=d.touches[0].clientY,p=0,o=0,s=d.touches.length)}function u(d){if(!(!i||!f)){var h=d.touches[0].clientX,k=d.touches[0].clientY;p=i-h,o=f-k}}function b(d,h,k){for(;d&&d!==l.documentElement;){var g=d.getAttribute(h);if(g)return g;d=d.parentNode}return k}})(window,document);((m,l,i)=>{i.endpoint==="results"&&i.ready(()=>{l.querySelectorAll("#urls img").forEach(t=>t.addEventListener("error",()=>{t.src=`${window.searxng.settings.theme_static_path}/img/img_load_error.svg`},{once:!0})),l.querySelector("#search_url button#copy_url")&&(l.querySelector("#search_url button#copy_url").style.display="block"),i.on(".btn-collapse","click",function(){const t=this.getAttribute("data-btn-text-collapsed"),s=this.getAttribute("data-btn-text-not-collapsed"),r=this.getAttribute("data-target"),n=l.querySelector(r);let u=this.innerHTML;this.classList.contains("collapsed")?u=u.replace(t,s):u=u.replace(s,t),this.innerHTML=u,this.classList.toggle("collapsed"),n.classList.toggle("invisible")}),i.on(".media-loader","click",function(){const t=this.getAttribute("data-target"),s=l.querySelector(`${t} > iframe`),r=s.getAttribute("src");(r==null||r===!1)&&s.setAttribute("src",s.getAttribute("data-src"))}),i.on("#copy_url","click",function(){const t=this.parentElement.querySelector("pre");navigator.clipboard.writeText(t.innerText),this.innerText=this.dataset.copiedText});let f;const p=l.createElement("div");p.classList.add("loader");const o=new Image,a=(t,s)=>{f&&clearTimeout(f),f=setTimeout(()=>{o.src=t},1e3),o.onload=()=>{s(),p.remove()},o.onerror=()=>{p.remove()}};i.selectImage=t=>{if(l.getElementById("results").classList.add("image-detail-open"),window.location.hash="#image-viewer",i.scrollPageToSelected(),!t)return;const s=t.querySelector(".result-images-source img");if(!s)return;const r=s.getAttribute("data-src");if(!r)return;const n=t.querySelector(".image_thumbnail");s.src=n.src,t.querySelector(".detail").appendChild(p),a(r,()=>{s.src=r,s.removeAttribute("data-src")})},i.closeDetail=()=>{l.getElementById("results").classList.remove("image-detail-open"),window.location.hash==="#image-viewer"&&window.history.back(),i.scrollPageToSelected()},i.on(".result-detail-close","click",t=>{t.preventDefault(),i.closeDetail()}),i.on(".result-detail-previous","click",t=>{t.preventDefault(),i.selectPrevious(!1)}),i.on(".result-detail-next","click",t=>{t.preventDefault(),i.selectNext(!1)}),window.addEventListener("hashchange",()=>{window.location.hash!=="#image-viewer"&&i.closeDetail()}),l.querySelectorAll(".swipe-horizontal").forEach(t=>{t.addEventListener("swiped-left",()=>{i.selectNext(!1)}),t.addEventListener("swiped-right",()=>{i.selectPrevious(!1)})}),m.addEventListener("scroll",()=>{const t=l.getElementById("backToTop"),s=document.documentElement.scrollTop||document.body.scrollTop,r=l.getElementById("results");t!==null&&(s>=100?r.classList.add("scrolling"):r.classList.remove("scrolling"))},!0)})})(window,document,window.searxng);((m,l,i)=>{const f="q";let p;const o=window.matchMedia("only screen and (max-width: 50em)").matches,a=document.querySelector("main").id==="main_results";function t(){if(p.value.length>0){const n=document.getElementById("search");setTimeout(n.submit.bind(n),0)}}function s(n){const u=document.getElementById("clear_search"),b=()=>{n.value.length===0?u.classList.add("empty"):u.classList.remove("empty")};b(),u.addEventListener("click",d=>{n.value="",n.focus(),b(),d.preventDefault()}),n.addEventListener("input",b,!1)}const r=async n=>{let u;if(i.settings.method==="GET"){const b=new URLSearchParams;b.append("q",n),u=fetch(`./autocompleter?${b.toString()}`)}else{const b=new FormData;b.append("q",n),u=fetch("./autocompleter",{method:"POST",body:b})}u.then(async b=>{const d=await b.json();if(!d)return;const h=l.querySelector(".autocomplete"),k=l.querySelector(".autocomplete ul");if(h.classList.add("open"),k.innerHTML="",!d[1]||d[1].length===0){const g=document.createElement("li");g.classList.add("no-item-found"),g.innerHTML=i.settings.translations.no_item_found,k.appendChild(g);return}for(const g of d[1]){const E=document.createElement("li");E.innerText=g,i.on(E,"mousedown",()=>{p.value=g,l.querySelector("#search").submit(),h.classList.remove("open")}),k.appendChild(E)}})};i.ready(()=>{!o&&!a&&document.getElementById("q").focus();const n=l.getElementById("direct_search"),u=l.getElementById("lucky_field");n&&u&&i.on(n,"click",()=>{u.value="1"}),p=l.getElementById(f);const b=l.querySelector(".autocomplete"),d=l.querySelector(".autocomplete ul");p!==null&&(s(p),i.settings.autocomplete&&(i.on(p,"input",()=>{const g=p.value;g.length<i.settings.autocomplete_min||setTimeout(()=>{g===p.value&&r(g)},300)}),i.on(p,"keyup",g=>{let E=-1;const w=d.children;for(let e=0;e<w.length;e++)if(w[e].classList.contains("active")){E=e;break}let S=-1;if(g.key==="ArrowUp"?(E>=0&&w[E].classList.remove("active"),S=(E-1+w.length)%w.length):g.key==="ArrowDown"?(E>=0&&w[E].classList.remove("active"),S=(E+1)%w.length):(g.key==="Tab"||g.key==="Enter")&&b.classList.remove("open"),S!==-1){const e=w[S];e.classList.add("active"),e.classList.contains("no-item-found")||(p.value=e.innerText)}}))),p!==null&&i.settings.search_on_category_select&&l.querySelector(".search_filters")!=null&&(i.on(l.getElementById("safesearch"),"change",t),i.on(l.getElementById("time_range"),"change",t),i.on(l.getElementById("language"),"change",t));const h=l.querySelectorAll("button.category_button");for(const g of h)i.on(g,"click",E=>{if(E.shiftKey){E.preventDefault(),g.classList.toggle("selected");return}const w=l.querySelectorAll("button.category_button.selected");for(const S of w)S.classList.remove("selected");g.classList.add("selected")});const k=l.querySelector("#search");k!=null&&i.on(k,"submit",g=>{g.preventDefault();const E=l.querySelector("#selected-categories");if(E){const w=[];for(const S of h)S.classList.contains("selected")&&w.push(S.name.replace("category_",""));E.value=w.join(",")}k.submit()})})})(window,document,window.searxng);
//# sourceMappingURL=searxng.min.js.map
