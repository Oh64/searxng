{"version":3,"file":"anim.loader.js","sources":["../../../../../client/simple/src/js/main/loading_anim_starter.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', async () => {\n    const form = document.querySelector('form#search');\n    const overlay = document.getElementById('loading_overlay');\n    const loadingText = document.getElementById('loading_text');\n    let enginesCache = {};\n    let index = 0;\n    let interval = null;\n\n    if (!form || !overlay) return;\n\n    try {\n        const response = await fetch('/engines.json');\n        enginesCache = await response.json();\n    } catch (err) {\n        console.error('Error engines.json not fetched', err);\n        enginesCache = {};\n    }\n\n    form.addEventListener('submit', () => {\n        const formData = new FormData(form);\n        if (formData.get('q') != '') {\n            const catValue = formData.get('categories') || formData.get('category_general') || '';\n            const category = (catValue === \"1\" || catValue === \"general\") ? \"web\" : (catValue || \"web\");\n\n            overlay.style.display = 'flex';\n            index = 0;\n\n            const engines = enginesCache[category] || [\"the web\"];\n\n            interval = setInterval(() => {\n                if (index < engines.length) {\n                    loadingText.textContent = `Searching on ${engines[index]}...`;\n                    index++;\n                } else {\n                    loadingText.textContent = `Finalizing the ${category} search...`;\n                    clearInterval(interval);\n                    interval = null;\n                }\n            }, 500);\n        }\n    });\n\n    window.addEventListener('pageshow', () => {\n        if (interval) {\n            clearInterval(interval);\n            interval = null;\n        }\n        overlay.style.display = 'none';\n    });\n});\n"],"names":["form","overlay","loadingText","enginesCache","index","interval","err","formData","catValue","category","engines"],"mappings":"AAAA,SAAS,iBAAiB,mBAAoB,SAAY,CACtD,MAAMA,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAU,SAAS,eAAe,iBAAiB,EACnDC,EAAc,SAAS,eAAe,cAAc,EAC1D,IAAIC,EAAe,CAAA,EACfC,EAAQ,EACRC,EAAW,KAEf,GAAI,GAACL,GAAQ,CAACC,GAEd,IAAI,CAEAE,EAAe,MADE,MAAM,MAAM,eAAe,GACd,KAAI,CAC1C,OAAaG,EAAK,CACV,QAAQ,MAAM,iCAAkCA,CAAG,EACnDH,EAAe,CAAA,CACvB,CAEIH,EAAK,iBAAiB,SAAU,IAAM,CAClC,MAAMO,EAAW,IAAI,SAASP,CAAI,EAClC,GAAIO,EAAS,IAAI,GAAG,GAAK,GAAI,CACzB,MAAMC,EAAWD,EAAS,IAAI,YAAY,GAAKA,EAAS,IAAI,kBAAkB,GAAK,GAC7EE,EAAYD,IAAa,KAAOA,IAAa,UAAa,MAASA,GAAY,MAErFP,EAAQ,MAAM,QAAU,OACxBG,EAAQ,EAER,MAAMM,EAAUP,EAAaM,CAAQ,GAAK,CAAC,SAAS,EAEpDJ,EAAW,YAAY,IAAM,CACrBD,EAAQM,EAAQ,QAChBR,EAAY,YAAc,gBAAgBQ,EAAQN,CAAK,CAAC,MACxDA,MAEAF,EAAY,YAAc,kBAAkBO,CAAQ,aACpD,cAAcJ,CAAQ,EACtBA,EAAW,KAE/B,EAAe,GAAG,CAClB,CACA,CAAK,EAED,OAAO,iBAAiB,WAAY,IAAM,CAClCA,IACA,cAAcA,CAAQ,EACtBA,EAAW,MAEfJ,EAAQ,MAAM,QAAU,MAChC,CAAK,EACL,CAAC"}